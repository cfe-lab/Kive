language: python
python:
    - "2.7"
sudo: required
services:
  - postgresql
  - docker
# before_install:
#    - sudo apt-get install -y -q openmpi-bin libopenmpi-dev
install: "pip install -r requirements-dev.txt"
before_script:
    - sed -f travis_settings_modification.sed kive/kive/settings_default.py > kive/kive/settings.py
    - sudo groupadd kiveprocessing
    - sudo useradd kivefleet -G kiveprocessing
script: "cd kive && ./manage.py test --setting kive.settings_mocked && coverage run manage.py test --setting kive.settings_test_pg"
after_success:
    - pip install codecov
    - codecov