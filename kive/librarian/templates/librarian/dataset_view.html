<!-- Django template -->
<!-- Display contents of Methods as a HTML table -->

{% extends "portal/base.html" %}

{% load filters %}

{% block title %}Datasets{% endblock %}

{% block javascript %}
{% endblock %}

{% block stylesheets %}
<link rel="stylesheet" href="/static/librarian/dataset_view.css">
{% endblock %}

{% block content %}

{% if return %}
    <a href="{{return}}" rel="prev">Back</a>
{% else %}
    <a href="/datasets" rel="prev">Back to list of datasets</a>
{% endif %}

<h2>{{ dataset.name }}</h2>

<form id="datasetMetadata" name="datasetMetadata" action="" method="post" enctype="multipart/form-data">{% csrf_token %}

    <table id="dataset_details">
    <tr>
        <td colspan="2"><a href="{{ dataset.get_absolute_url }}">Download</a></td>
    </tr>

    <tr>
        <td>Date created:</td>
        <td>{{ dataset.date_created }}</td>
    </tr>
    <tr>
        <td>File size:</td>
        <td>{{ dataset.get_formatted_filesize }}</td>
    </tr>
    <tr>
        <td>Creator:</td>
        <td>{{ dataset.user }}</td>
    </tr>
    <tr>
        <td>Users allowed:</td>
        <td>
            {% if dataset.users_allowed.exists %}
                <ul>
                {% for user in dataset.users_allowed.all %}
                    <li>{{ user }}</li>
                {% endfor %}
                </ul>
            {% else %}
            None
            {% endif %}
        </td>
    </tr>
    <tr>
        <td>Groups allowed:</td>
        <td>
            {% if dataset.groups_allowed.exists %}
                <ul>
                {% for group in dataset.groups_allowed.all %}
                    <li>{{ group }}</li>
                {% endfor %}
                </ul>
            {% else %}
            None
            {% endif %}
        </td>
    </tr>

    <tr>
        <td>Name:</td>
        <td>
            {{ dataset_form.name }}
        </td>
        <td class="errortext">{{ dataset_form.name.errors }}</td>
    </tr>
    <tr>
        <td>Description:</td>
        <td>
            {{ dataset_form.description }}
        </td>
        <td class="errortext">{{ dataset_form.description.errors }}</td>
    </tr>

    </table>
    <input type="submit" name="reviseDatasetMetadata" value="Revise metadata"/>

</form>

<div class="dataset_contents">
{% block dataset_contents %}
{% endblock %}
</div>

{% endblock %}
