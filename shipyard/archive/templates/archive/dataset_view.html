<!-- Django template -->
<!-- Display contents of Methods as a HTML table -->

{% extends "portal/base.html" %}

{% load filters %}

{% block title %}Datasets{% endblock %}

{% block javascript %}
    <style>
        .col_warn {
            background-color: rgba(255, 203, 0, 0.59);
        }
        .col_error {
            background-color: rgba(255, 29, 0, 0.4);
        }
        th sub {
            font-weight: 100;
            font-size: 0.6em;
        }
    </style>
{% endblock %}

{% block content %}

<a href="/datasets" rel="prev">Back to list of datasets</a>

<h2>{{ dataset.name }}</h2>
<a href="{{ dataset.get_absolute_url }}">Download</a>

<table>
<thead>
    <tr>
    {% if dataset.content_matches_header %}
       {% for column in dataset.header %}
            <th>{{ column }}</th>
        {% endfor %}
    {% else %}
            <th> Expected: </th>
           {% for column in column_matching %}
                <th>
                    {{ column.0 }}
                </th>
            {% endfor %}
    {% endif %}
    </tr>

    {% if not dataset.content_matches_header %}
    <tr>
        <th> Observed: </th>
        {% for column in column_matching %}
            <th class="{% if column.0 != column.1 and column.0|length == 0  %}col_error{%  elif column.0 != column.1 and column.1|length > 0 %}col_warn{% endif%}">
                {{ column.1 }}
            </th>
        {% endfor %}
    </tr>
    {% endif %}
</thead>
</tbody>
    {% if dataset.content_matches_header %}
        {% for row in dataset.rows %}
            <tr>
            {% for value in row %}
                <td>{{ value|truncatechars:10 }}</td>
            {% endfor %}
            </tr>
        {% endfor %}
    {% else %}
        {% for row in processed_rows %}
            <tr>
                <td></td>
            {% for value in row %}
                <td>{{ value|truncatechars:10 }}</td>
            {% endfor %}
            </tr>
        {% endfor %}
    {% endif %}
</tbody>
</table>
{% endblock %}
