<!-- Django template -->
<!-- Display contents of Methods as a HTML table -->

{% extends "portal/base.html" %}

{% load filters %}

{% block title %}Datasets{% endblock %}

{% block javascript %}
{% endblock %}

{% block content %}

<a href="usr.html" rel="prev">Back to user's portal</a>

<h2>Uploaded datasets</h2>


<table>
<thead>
	<tr>
        <th>Created By</th>
        <th>Name</th>
        <th>Description</th>
        <th>Date Created</th>
        <th>File Size (B)</th>
        <th>Users allowed</th>
        <th>Groups allowed</th>
        <th></th>
	</tr>
</thead>
{% for dataset in datasets %}
<tr>
    <td>{{ dataset.user }}</td>
	<td><a href="{{ dataset.get_absolute_url|get_view_link }}">{{ dataset.name }}</a></td>
	<td>{{ dataset.description|escape|linebreaksbr }}</td>
    <td>{{ dataset.date_created }}</td>
    <td>{{ dataset.get_filesize }}</td>
    <td>
        {% if dataset.symbolicdataset.users_allowed.exists %}
            <ul>
            {% for user in dataset.symbolicdataset.users_allowed.all %}
                <li>{{ user }}</li>
            {% endfor %}
            </ul>
        {% else %}
            None
        {% endif %}
    </td>
    <td>
        {% if dataset.symbolicdataset.groups_allowed.exists %}
            <ul>
            {% for group in dataset.symbolicdataset.groups_allowed.all %}
                <li>{{ group }}</li>
            {% endfor %}
            </ul>
        {% else %}
            None
        {% endif %}
    </td>
    <td><a href="{{ dataset.get_absolute_url }}">Download</a></td>
</tr>
{% endfor %}
</table>

<a href="/datasets_add" class="button">+&ensp;<span class="button-lbl">Add Datasets</span></a>&ensp;
<a href="/datasets_add_bulk" class="button">+&ensp;<span class="button-lbl">Add Bulk Datasets</span></a>

{% endblock %}
